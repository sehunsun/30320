<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>Canvas ç•«åœ–å·¥å…·</title>

<style>
  body { 
    text-align: center; 
    font-family: sans-serif; 
    margin: 0;
  }

  /* å°è¦½åˆ— */
  .topnav {
    background: #333;
    padding: 10px;
  }

  .topnav a {
    color: white;
    margin: 0 10px;
    text-decoration: none;
    font-weight: bold;
  }

  .topnav a.active {
    color: yellow;
    border-bottom: 2px solid yellow;
  }

  canvas { 
    border: 1px solid #000; 
    cursor: crosshair; 
    margin-top: 10px;
  }

  .toolbar { margin: 10px; }
  button { margin: 0 5px; }
</style>
</head>

<body>

<!-- âœ… å°è¦½åˆ—ä¸€å®šè¦åœ¨ body è£¡é¢ -->
<div class="topnav">
    <a href="30320.html">Home</a>
    <a class="active" href="draw.html">ç•«å¸ƒ</a>
    <a href="guess.html">çŒœæ•¸å­—éŠæˆ²</a>
    <a href="index.html">ç­ç´šç•™è¨€æ¿</a>
    <a href="snake.html">è²ªé£Ÿè›‡</a>
    <a href="test.html">æ†²ç¾…å¤©å¾</a>
</div>

<h2>ğŸ¨ Canvas ç•«åœ–å·¥å…·</h2>

<div class="toolbar">
  é¡è‰²ï¼š
  <input type="color" id="color" value="#000000">
  ç·šæ¢ç²—ç´°ï¼š
  <input type="range" id="lineWidth" min="1" max="30" value="5">
  <span id="value">5</span> px
  <button id="eraser">ğŸ©¹ æ©¡çš®æ“¦</button>
  <button id="clear">ğŸ§¹ æ¸…é™¤ç•«å¸ƒ</button>
  <button id="download">ğŸ’¾ ä¸‹è¼‰åœ–ç‰‡</button>
</div>

<canvas id="canvas" width="800" height="500"></canvas>

<script>
/* ä½ åŸæœ¬çš„ JS å…¨éƒ¨ç…§ç”¨ */
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let drawing = false;
let queue = [];
let erasing = false;

function drawLine(ctx, x1, y1, x2, y2) {
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    ctx.closePath();
}

canvas.addEventListener('mousedown', function(e) {
    drawing = true;
    const x = e.offsetX;
    const y = e.offsetY;
    drawLine(ctx, x, y, x, y);
    queue.push([x, y]);
});

canvas.addEventListener('mousemove', function(e) {
    if (drawing) {
        const old = queue.shift();
        const x = e.offsetX;
        const y = e.offsetY;
        drawLine(ctx, old[0], old[1], x, y);
        queue.push([x, y]);
    }
});

canvas.addEventListener('mouseup', function() {
    drawing = false;
    queue = [];
});

const color = document.getElementById("color");
const lineWidth = document.getElementById("lineWidth");
const value = document.getElementById("value");

value.textContent = lineWidth.value;
ctx.strokeStyle = color.value;
ctx.lineWidth = lineWidth.value;

color.addEventListener("input", (e) => {
    ctx.strokeStyle = e.target.value;
    erasing = false;
}); 

lineWidth.addEventListener("input", (e) => {
    value.textContent = e.target.value;
    ctx.lineWidth = e.target.value;
});

const eraserBtn = document.getElementById("eraser");
eraserBtn.addEventListener("click", () => {
    erasing = !erasing;
    if (erasing) {
        ctx.strokeStyle = "#FFFFFF";
        eraserBtn.textContent = "âœï¸ å›åˆ°ç•«ç­†";
    } else {
        ctx.strokeStyle = color.value;
        eraserBtn.textContent = "ğŸ©¹ æ©¡çš®æ“¦";
    }
});

const clearBtn = document.getElementById("clear");
clearBtn.addEventListener("click", () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
});

const downloadBtn = document.getElementById("download");
downloadBtn.addEventListener("click", () => {
    const link = document.createElement('a');
    link.download = 'my_drawing.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
});
</script>

</body>
</html>
